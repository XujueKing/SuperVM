[package]
name = "vm-runtime"
version.workspace = true
edition.workspace = true
authors.workspace = true
license.workspace = true

[dependencies]
wasmi = "0.31"
wasmtime = "17.0"
anyhow = "1.0"
thiserror = "1.0"
log = "0.4"
wat = "1.0"

# 密码学库
sha2 = "0.10"
sha3 = "0.10"
k256 = { version = "0.13", features = ["ecdsa", "arithmetic"] }
ed25519-dalek = { version = "2.0", features = ["rand_core"] }
hex = "0.4"

# 并发库
crossbeam-deque = "0.8"
rayon = "1.10"
dashmap = "6.1"
parking_lot = "0.12"

# 序列化库
serde = { version = "1.0", features = ["derive"] }

[dev-dependencies]
criterion = { version = "0.5", features = ["html_reports"] }
rand = "0.8"

[features]
default = []
groth16-verifier = ["dep:zk-groth16-test"]

[dependencies.zk-groth16-test]
path = "../../zk-groth16-test"
optional = true

[[bench]]
name = "parallel_benchmark"
harness = false

[[example]]
name = "ownership_demo"
path = "../../examples/ownership_demo.rs"

[[example]]
name = "supervm_routing_demo"
path = "../../examples/supervm_routing_demo.rs"

[[example]]
name = "routed_batch_demo"
path = "../../examples/routed_batch_demo.rs"

[[example]]
name = "tps_compare_demo"
path = "../../examples/tps_compare_demo.rs"

[[example]]
name = "fallback_demo"
path = "../../examples/fallback_demo.rs"

[[example]]
name = "tps_compare_fallback_demo"
path = "../../examples/tps_compare_fallback_demo.rs"

[[example]]
name = "high_contention_fallback_demo"
path = "../../examples/high_contention_fallback_demo.rs"

[[example]]
name = "large_scale_tps_bench"
path = "../../examples/large_scale_tps_bench.rs"

[[example]]
name = "mixed_workload_test"
path = "../../examples/mixed_workload_test.rs"
