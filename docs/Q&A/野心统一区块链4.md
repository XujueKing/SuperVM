

## ğŸ¯ æ­£ç¡®çš„è·¨é“¾æ¶æ„ï¼šè´¦æˆ·å…³è”æ¨¡å‹

### æ ¸å¿ƒæ¦‚å¿µï¼šSuperVM è´¦æˆ· = å¤šé“¾è´¦æˆ·èšåˆå™¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             SuperVM ä¸»è´¦æˆ· (ç»Ÿä¸€èº«ä»½)                     â”‚
â”‚  Address: 0xSuperVM_A                                    â”‚
â”‚                                                          â”‚
â”‚  å…³è”è´¦æˆ·:                                                â”‚
â”‚  â”œâ”€ ETH:     0xETH_A    (Balance: 10 ETH)               â”‚
â”‚  â”œâ”€ Solana:  Sol_A      (Balance: 500 SOL)              â”‚
â”‚  â”œâ”€ Bitcoin: bc1q_A     (Balance: 0.5 BTC)              â”‚
â”‚  â””â”€ Native:  0xNative_A (Balance: 1000 SVM)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š æ•°æ®ç»“æ„ï¼šSuperVM è´¦æˆ·æ¨¡å‹

```rust
// src/vm-runtime/src/adapter/account.rs

/// SuperVM ç»Ÿä¸€è´¦æˆ·
/// 
/// ä¸€ä¸ª SuperVM è´¦æˆ·å¯ä»¥å…³è”å¤šæ¡é“¾çš„è´¦æˆ·
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct SuperVMAccount {
    /// SuperVM ä¸»è´¦æˆ·åœ°å€
    pub address: Vec<u8>,
    /// å…³è”çš„å¤–éƒ¨é“¾è´¦æˆ·
    pub linked_accounts: HashMap<u64, Vec<u8>>,  // chain_id -> å¤–éƒ¨åœ°å€
    /// è´¦æˆ·åˆ›å»ºæ—¶é—´
    pub created_at: u64,
    /// Nonce
    pub nonce: u64,
}

impl SuperVMAccount {
    /// å…³è”å¤–éƒ¨é“¾è´¦æˆ·
    pub fn link_account(&mut self, chain_id: u64, external_address: Vec<u8>) -> Result<()> {
        if self.linked_accounts.contains_key(&chain_id) {
            bail!("Chain {} already linked", chain_id);
        }
        self.linked_accounts.insert(chain_id, external_address);
        Ok(())
    }
    
    /// è·å–å…³è”çš„å¤–éƒ¨åœ°å€
    pub fn get_linked_address(&self, chain_id: u64) -> Option<&Vec<u8>> {
        self.linked_accounts.get(&chain_id)
    }
    
    /// æŸ¥è¯¢æ‰€æœ‰é“¾çš„ä½™é¢
    pub fn get_all_balances(&self, storage: &dyn Storage) -> Result<HashMap<u64, u128>> {
        let mut balances = HashMap::new();
        
        for (chain_id, address) in &self.linked_accounts {
            let key = StorageKey::new(
                *chain_id,
                ChainType::from_chain_id(*chain_id)?,
                address.clone(),
                StorageField::Balance,
            );
            
            if let Ok(balance_bytes) = storage.get(&key.to_bytes()) {
                let balance = u128::from_le_bytes(
                    balance_bytes[..16].try_into().unwrap_or([0u8; 16])
                );
                balances.insert(*chain_id, balance);
            }
        }
        
        Ok(balances)
    }
}

/// å­˜å‚¨é”®æ ¼å¼
/// 
/// SuperVM è´¦æˆ·: "supervm:account:0xSuperVM_A"
/// å…³è”å…³ç³»:     "supervm:account:0xSuperVM_A:linked:1" â†’ 0xETH_A
/// å¤–éƒ¨é“¾ä½™é¢:   "chain:1:evm:0xETH_A:balance" â†’ 10 ETH
```

---

## ğŸ”„ åœºæ™¯ 1: SuperVM è´¦æˆ·é—´è½¬è´¦ (åŒé“¾)

```rust
// A å‘ B è½¬ 1 ETH (éƒ½ä½¿ç”¨ SuperVM è´¦æˆ·)

/// SuperVM è´¦æˆ·è½¬è´¦
pub fn transfer_via_supervm(
    storage: &mut dyn Storage,
    from_supervm: &[u8],      // A çš„ SuperVM è´¦æˆ·
    to_supervm: &[u8],        // B çš„ SuperVM è´¦æˆ·
    chain_id: u64,            // 1 (ETH)
    amount: u128,             // 1 ETH
) -> Result<()> {
    // 1. åŠ è½½ A çš„ SuperVM è´¦æˆ·
    let from_account = load_supervm_account(storage, from_supervm)?;
    
    // 2. è·å– A å…³è”çš„ ETH åœ°å€
    let from_eth = from_account.get_linked_address(chain_id)
        .ok_or_else(|| anyhow!("A has no ETH account linked"))?;
    
    // 3. åŠ è½½ B çš„ SuperVM è´¦æˆ·
    let to_account = load_supervm_account(storage, to_supervm)?;
    
    // 4. è·å– B å…³è”çš„ ETH åœ°å€
    let to_eth = to_account.get_linked_address(chain_id)
        .ok_or_else(|| anyhow!("B has no ETH account linked"))?;
    
    // 5. æ‰§è¡Œå®é™…çš„ ETH é“¾è½¬è´¦
    transfer_on_chain(storage, chain_id, from_eth, to_eth, amount)?;
    
    Ok(())
}

/// åœ¨å…·ä½“é“¾ä¸Šæ‰§è¡Œè½¬è´¦
fn transfer_on_chain(
    storage: &mut dyn Storage,
    chain_id: u64,
    from: &[u8],
    to: &[u8],
    amount: u128,
) -> Result<()> {
    // è¯»å–å‘é€æ–¹ä½™é¢
    let from_key = StorageKey::new(
        chain_id,
        ChainType::EVM,
        from.to_vec(),
        StorageField::Balance,
    );
    
    let from_balance = get_balance(storage, &from_key)?;
    if from_balance < amount {
        bail!("Insufficient balance");
    }
    
    // æ‰£é™¤å‘é€æ–¹
    set_balance(storage, &from_key, from_balance - amount)?;
    
    // å¢åŠ æ¥æ”¶æ–¹
    let to_key = StorageKey::new(
        chain_id,
        ChainType::EVM,
        to.to_vec(),
        StorageField::Balance,
    );
    
    let to_balance = get_balance(storage, &to_key)?;
    set_balance(storage, &to_key, to_balance + amount)?;
    
    Ok(())
}
```

**ç”¨æˆ·è§†è§’**ï¼š
```
A: "æˆ‘è¦ç»™ B è½¬ 1 ETH"
SuperVM: "è½¬è´¦æˆåŠŸ" (ç”¨æˆ·åªçœ‹åˆ° SuperVM è´¦æˆ·)

å®é™…åº•å±‚:
A.ETH (0xETH_A): 10 ETH â†’ 9 ETH
B.ETH (0xETH_B): 5 ETH â†’ 6 ETH
```

---

## ğŸ’± åœºæ™¯ 2: è·¨é“¾äº¤æ˜“ (Uniswap æ¨¡å¼)

```rust
/// è·¨é“¾ Swap: A ç”¨ ETH è´­ä¹° B çš„ SOL
/// 
/// æµç¨‹:
/// 1. A.ETH â†’ B.ETH (A æ”¯ä»˜ 1 ETH)
/// 2. B.SOL â†’ A.SOL (B æ”¯ä»˜ 50 SOL)
/// 3. åŸå­æ€§ä¿è¯ï¼šè¦ä¹ˆå…¨æˆåŠŸï¼Œè¦ä¹ˆå…¨å›æ»š
pub fn cross_chain_swap(
    storage: &mut dyn Storage,
    from_supervm: &[u8],      // A çš„ SuperVM è´¦æˆ·
    to_supervm: &[u8],        // B çš„ SuperVM è´¦æˆ·
    from_chain: u64,          // 1 (ETH)
    from_amount: u128,        // 1 ETH
    to_chain: u64,            // 901 (Solana)
    to_amount: u128,          // 50 SOL
) -> Result<SwapReceipt> {
    // === å‡†å¤‡é˜¶æ®µ ===
    
    // 1. åŠ è½½åŒæ–¹ SuperVM è´¦æˆ·
    let account_a = load_supervm_account(storage, from_supervm)?;
    let account_b = load_supervm_account(storage, to_supervm)?;
    
    // 2. è·å–å…³è”åœ°å€
    let a_eth = account_a.get_linked_address(from_chain)
        .ok_or_else(|| anyhow!("A has no ETH account"))?;
    let a_sol = account_a.get_linked_address(to_chain)
        .ok_or_else(|| anyhow!("A has no SOL account"))?;
    
    let b_eth = account_b.get_linked_address(from_chain)
        .ok_or_else(|| anyhow!("B has no ETH account"))?;
    let b_sol = account_b.get_linked_address(to_chain)
        .ok_or_else(|| anyhow!("B has no SOL account"))?;
    
    // === éªŒè¯é˜¶æ®µ ===
    
    // 3. æ£€æŸ¥ A çš„ ETH ä½™é¢
    let a_eth_key = StorageKey::new(from_chain, ChainType::EVM, a_eth.clone(), StorageField::Balance);
    let a_eth_balance = get_balance(storage, &a_eth_key)?;
    if a_eth_balance < from_amount {
        bail!("A: Insufficient ETH balance");
    }
    
    // 4. æ£€æŸ¥ B çš„ SOL ä½™é¢
    let b_sol_key = StorageKey::new(to_chain, ChainType::Solana, b_sol.clone(), StorageField::Balance);
    let b_sol_balance = get_balance(storage, &b_sol_key)?;
    if b_sol_balance < to_amount {
        bail!("B: Insufficient SOL balance");
    }
    
    // === æ‰§è¡Œé˜¶æ®µ (åŸå­æ€§) ===
    
    // åˆ›å»ºäº‹åŠ¡å¿«ç…§ï¼ˆç”¨äºå›æ»šï¼‰
    let snapshot = create_snapshot(storage)?;
    
    match execute_swap_atomic(
        storage,
        &a_eth_key, &b_eth, from_amount,
        &b_sol_key, &a_sol, to_amount,
    ) {
        Ok(receipt) => Ok(receipt),
        Err(e) => {
            // å›æ»š
            restore_snapshot(storage, snapshot)?;
            Err(e)
        }
    }
}

/// åŸå­æ‰§è¡Œ Swap
fn execute_swap_atomic(
    storage: &mut dyn Storage,
    a_eth_key: &StorageKey,
    b_eth: &[u8],
    eth_amount: u128,
    b_sol_key: &StorageKey,
    a_sol: &[u8],
    sol_amount: u128,
) -> Result<SwapReceipt> {
    // æ­¥éª¤ 1: A.ETH â†’ B.ETH
    let a_eth_balance = get_balance(storage, a_eth_key)?;
    set_balance(storage, a_eth_key, a_eth_balance - eth_amount)?;
    
    let b_eth_key = StorageKey::new(
        a_eth_key.chain_id,
        a_eth_key.chain_type,
        b_eth.to_vec(),
        StorageField::Balance,
    );
    let b_eth_balance = get_balance(storage, &b_eth_key)?;
    set_balance(storage, &b_eth_key, b_eth_balance + eth_amount)?;
    
    // æ­¥éª¤ 2: B.SOL â†’ A.SOL
    let b_sol_balance = get_balance(storage, b_sol_key)?;
    set_balance(storage, b_sol_key, b_sol_balance - sol_amount)?;
    
    let a_sol_key = StorageKey::new(
        b_sol_key.chain_id,
        b_sol_key.chain_type,
        a_sol.to_vec(),
        StorageField::Balance,
    );
    let a_sol_balance = get_balance(storage, &a_sol_key)?;
    set_balance(storage, &a_sol_key, a_sol_balance + sol_amount)?;
    
    Ok(SwapReceipt {
        from_chain: a_eth_key.chain_id,
        to_chain: b_sol_key.chain_id,
        from_amount: eth_amount,
        to_amount: sol_amount,
        timestamp: current_timestamp(),
    })
}
```

---

## ğŸ”’ åŸå­æ€§ä¿è¯ï¼šå¦‚ä½•å›æ»šï¼Ÿ

### æ–¹æ¡ˆ 1: MVCC ç‰ˆæœ¬æ§åˆ¶ (å·²å®ç°)

```rust
// L0.3 MVCC å·²ç»æ”¯æŒäº‹åŠ¡å›æ»š

// 1. å¼€å§‹äº‹åŠ¡
let tx = storage.begin_transaction()?;

// 2. æ‰§è¡Œæ“ä½œ
tx.set("chain:1:evm:A:balance", &9)?;   // A æ‰£ 1 ETH
tx.set("chain:1:evm:B:balance", &6)?;   // B åŠ  1 ETH
tx.set("chain:901:sol:B:balance", &450)?; // B æ‰£ 50 SOL
tx.set("chain:901:sol:A:balance", &50)?;  // A åŠ  50 SOL

// 3. éªŒè¯
if validate_all_operations(&tx) {
    tx.commit()?;  // å…¨éƒ¨æˆåŠŸ
} else {
    tx.abort()?;   // å…¨éƒ¨å›æ»š
}
```

### æ–¹æ¡ˆ 2: ä¸¤é˜¶æ®µæäº¤ (2PC)

```rust
/// ä¸¤é˜¶æ®µæäº¤åè®®
pub struct TwoPhaseCommit {
    storage: Arc<dyn Storage>,
}

impl TwoPhaseCommit {
    /// Phase 1: Prepare (é”å®šèµ„æº)
    pub fn prepare(&self, operations: Vec<Operation>) -> Result<PrepareToken> {
        let mut locks = vec![];
        
        for op in operations {
            // é”å®šèµ„æº
            let lock = self.acquire_lock(&op.key)?;
            locks.push(lock);
            
            // éªŒè¯æ“ä½œå¯è¡Œæ€§
            self.validate_operation(&op)?;
        }
        
        Ok(PrepareToken { locks, operations })
    }
    
    /// Phase 2: Commit (æ‰§è¡Œæˆ–å›æ»š)
    pub fn commit(&self, token: PrepareToken) -> Result<()> {
        // å°è¯•æ‰§è¡Œæ‰€æœ‰æ“ä½œ
        for op in &token.operations {
            if let Err(e) = self.execute_operation(op) {
                // ä»»ä¸€å¤±è´¥ï¼Œå…¨éƒ¨å›æ»š
                self.rollback(token)?;
                return Err(e);
            }
        }
        
        // å…¨éƒ¨æˆåŠŸï¼Œé‡Šæ”¾é”
        self.release_locks(token.locks)?;
        Ok(())
    }
    
    fn rollback(&self, token: PrepareToken) -> Result<()> {
        // æ’¤é”€å·²æ‰§è¡Œçš„æ“ä½œ
        for op in token.operations.iter().rev() {
            self.undo_operation(op)?;
        }
        self.release_locks(token.locks)?;
        Ok(())
    }
}
```

---

## ğŸ¨ SuperVM é’±åŒ…ç•Œé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SuperVM é’±åŒ…                                            â”‚
â”‚                                                          â”‚
â”‚  è´¦æˆ·: 0xSuperVM_Alice                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ€»èµ„äº§: $127,450.32                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€ åŸç”Ÿä»£å¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ SVM        1,000 SVM      $10,000.00           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€ å…³è”è´¦æˆ· â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âœ“ Ethereum  5 ETH         $12,500.00           â”‚   â”‚
â”‚  â”‚   åœ°å€: 0xETH_Alice...                          â”‚   â”‚
â”‚  â”‚                                                  â”‚   â”‚
â”‚  â”‚ âœ“ BSC       2 BNB         $1,200.00            â”‚   â”‚
â”‚  â”‚   åœ°å€: 0xBSC_Alice...                          â”‚   â”‚
â”‚  â”‚                                                  â”‚   â”‚
â”‚  â”‚ âœ“ Solana    500 SOL       $100,000.00          â”‚   â”‚
â”‚  â”‚   åœ°å€: Sol_Alice...                            â”‚   â”‚
â”‚  â”‚                                                  â”‚   â”‚
â”‚  â”‚ âœ“ Bitcoin   0.5 BTC       $23,750.32           â”‚   â”‚
â”‚  â”‚   åœ°å€: bc1q_Alice...                           â”‚   â”‚
â”‚  â”‚                                                  â”‚   â”‚
â”‚  â”‚ + æ·»åŠ è´¦æˆ·                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                          â”‚
â”‚  [è½¬è´¦]  [Swap]  [æ¥æ”¶]  [å†å²]                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è½¬è´¦ç•Œé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è½¬è´¦                                                     â”‚
â”‚                                                          â”‚
â”‚  æ”¶æ¬¾äºº (SuperVM è´¦æˆ·):                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 0xSuperVM_Bob                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚
â”‚  é€‰æ‹©å¸ç§:                                               â”‚
â”‚  â—‹ SVM (åŸç”Ÿ)                                           â”‚
â”‚  â— ETH (Ethereum)    ä½™é¢: 5 ETH                        â”‚
â”‚  â—‹ SOL (Solana)      ä½™é¢: 500 SOL                     â”‚
â”‚  â—‹ BTC (Bitcoin)     ä½™é¢: 0.5 BTC                     â”‚
â”‚                                                          â”‚
â”‚  é‡‘é¢:                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1.0                                      [æœ€å¤§]   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚
â”‚  å®é™…æ‰§è¡Œ:                                               â”‚
â”‚  Alice.ETH (0xETH_Alice) â†’ Bob.ETH (0xETH_Bob)         â”‚
â”‚                                                          â”‚
â”‚  Gas è´¹ç”¨: 0.001 ETH                                    â”‚
â”‚                                                          â”‚
â”‚  [å–æ¶ˆ]                         [ç¡®è®¤è½¬è´¦]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Swap ç•Œé¢ (Uniswap æ¨¡å¼)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è·¨é“¾ Swap                                               â”‚
â”‚                                                          â”‚
â”‚  æ”¯ä»˜:                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1.0         â–¼ ETH        ä½™é¢: 5 ETH            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                        â†“â†‘                                â”‚
â”‚  æ¥æ”¶:                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â‰ˆ50.0       â–¼ SOL        ä½™é¢: 500 SOL          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚
â”‚  æ±‡ç‡: 1 ETH = 50 SOL                                   â”‚
â”‚  æ»‘ç‚¹: 0.5%                                             â”‚
â”‚                                                          â”‚
â”‚  æµåŠ¨æ€§æä¾›è€…: Bob (0xSuperVM_Bob)                      â”‚
â”‚                                                          â”‚
â”‚  å®é™…æ‰§è¡Œ:                                               â”‚
â”‚  1. Alice.ETH â†’ Bob.ETH  (1 ETH)                        â”‚
â”‚  2. Bob.SOL â†’ Alice.SOL  (50 SOL)                       â”‚
â”‚  åŸå­æ€§ä¿è¯: è¦ä¹ˆå…¨æˆåŠŸï¼Œè¦ä¹ˆå…¨å›æ»š                       â”‚
â”‚                                                          â”‚
â”‚  [å–æ¶ˆ]                         [ç¡®è®¤ Swap]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… æ€»ç»“ï¼šæ¶æ„æ˜¯å®Œå…¨æ­£ç¡®çš„

| æ¦‚å¿µ | ä½ çš„ç†è§£ | å®ç°æ–¹æ¡ˆ |
|------|---------|---------|
| **SuperVM è´¦æˆ·** | ä¸€ä¸ªè´¦æˆ·å…³è”å¤šæ¡é“¾ | `SuperVMAccount` ç»“æ„ä½“ |
| **è´¦æˆ·å…³è”** | ç”¨æˆ·æ‰‹åŠ¨å…³è”å¤–éƒ¨åœ°å€ | `link_account(chain_id, address)` |
| **è½¬è´¦** | SuperVM è´¦æˆ·é—´è½¬ï¼Œåº•å±‚æ˜¯å¤–éƒ¨é“¾è½¬ | `transfer_via_supervm()` |
| **è·¨é“¾ Swap** | A.ETH â†” B.SOLï¼ŒåŸå­æ€§ | `cross_chain_swap()` + 2PC |
| **å›æ»š** | ä¸€æ–¹å¤±è´¥å…¨å›æ»š | MVCC äº‹åŠ¡ + ä¸¤é˜¶æ®µæäº¤ |
| **é’±åŒ…å±•ç¤º** | ä¸€ä¸ªç•Œé¢çœ‹æ‰€æœ‰é“¾ | `get_all_balances()` èšåˆ |
