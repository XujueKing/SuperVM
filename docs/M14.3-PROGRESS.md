# M14.3 Progress — Native SPIR-V (Vulkan)

Date: 2025-11-13

## Scope

- Bypass wgpu/Naga u64 limitation by using native Vulkan (ash) and precompiled SPIR-V.

- Implement BLS12-381 field ops (6×u64 limbs) on GPU.

## What’s Done

- Vulkan backend skeleton (Instance/Device/Queue/CommandPool)

- SPIR-V loading + magic validation

- Buffer management (create/map/unmap/destroy) with tests (1K & 256K elements)

- Compute pipeline scaffolding:
  - DescriptorSetLayout (A, B, C storage buffers)
  - PipelineLayout / ComputePipeline
  - DescriptorPool/Set allocation & writes
  - Command buffer allocate/record/submit with fence

- Public API façade:
  - `gpu_executor::bls12_field_gpu::add_u64_limbs(spirv_bytes, a, b, elements)`

- Build status:
  - `cargo check -p gpu-executor --features spirv-vulkan` PASS
  - Unit tests: Vulkan-related pass; one unrelated metrics test known to fail

## What’s Next

- Integrate real `bls12_381_field.spv` and run end-to-end `field_add` on GPU

- Compare GPU outputs with CPU golden vectors (arkworks) for N in {1K, 16K, 256K}

- Measure throughput and latency; target >10x CPU baseline

## Notes

- Using `ash = 0.37.3` to keep builder API; upgrade to 0.38 planned after proof-of-functionality.

- Workgroup size currently assumed as 64; ensure shader local_size matches or expose specialization constants.
